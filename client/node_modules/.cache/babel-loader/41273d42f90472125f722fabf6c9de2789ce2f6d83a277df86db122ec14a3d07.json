{"ast":null,"code":"import _objectSpread from\"C:/Users/TUF GAMING/OneDrive/Desktop/BE project/working on shushruta/shushruta/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{Fragment,useContext,useState}from\"react\";import{useParams}from\"react-router-dom\";import{Alert}from\"./Action\";import moment from\"moment\";import{LayoutContext}from\"../layout\";import{deleteReview}from\"./Action\";import{isAuthenticate}from\"../auth/fetchApi\";import{getSingleProduct}from\"./FetchApi\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AllReviews=props=>{const{data,dispatch}=useContext(LayoutContext);const{pRatingsReviews}=data.singleProductDetail;let{id}=useParams();// Prodduct Id\nconst[fData,setFdata]=useState({success:false});if(fData.success){setTimeout(()=>{setFdata(_objectSpread(_objectSpread({},fData),{},{success:false}));},2000);}const fetchData=async()=>{try{let responseData=await getSingleProduct(id);if(responseData.Product){dispatch({type:\"singleProductDetail\",payload:responseData.Product});}if(responseData.error){console.log(responseData.error);}}catch(error){console.log(error);}};console.log(pRatingsReviews);return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:mx-16 lg:mx-20 xl:mx-24 flex flex-col\",children:fData.success?Alert(\"red\",fData.success):\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 mb-12 md:mx-16 lg:mx-20 xl:mx-24\",children:pRatingsReviews.length>0?pRatingsReviews.map((item,index)=>{return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 md:mb-8 flex flex-col md:flex-row md:items-start\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"mx-2 w-16 h-16 rounded-full\",src:\"https://secure.gravatar.com/avatar/676d90a1574e9d3ebf98dd36f7adad60?s=60&d=mm&r=g\",alt:\"pic\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mx-2 flex justify-between w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"span\",{children:item.user?item.user.name:\"\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-yellow-700\",children:moment(item.createdAt).format(\"lll\")})]}),/*#__PURE__*/_jsx(\"div\",{className:\"leading-tight mt-3\",children:item.review})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[[...Array(Number(item.rating))].map(index=>{return/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 fill-current text-yellow-700\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"})})},index);}),[...Array(5-Number(item.rating))].map(index=>{return/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 fill-current text-gray-300\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"})})},index);})]}),item.user&&isAuthenticate()&&item.user._id===isAuthenticate().user._id?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center my-2\",children:/*#__PURE__*/_jsx(\"span\",{onClick:e=>deleteReview(item._id,data.singleProductDetail._id,fetchData,setFdata),className:\"hover:bg-gray-300 p-2 rounded-full cursor-pointer\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6 text-yellow-700\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"})})})}):/*#__PURE__*/_jsx(\"div\",{})]})]})]})},index);}):/*#__PURE__*/_jsx(\"div\",{children:\"No Review found\"})})]});};export default AllReviews;","map":{"version":3,"names":["React","Fragment","useContext","useState","useParams","Alert","moment","LayoutContext","deleteReview","isAuthenticate","getSingleProduct","jsx","_jsx","jsxs","_jsxs","AllReviews","props","data","dispatch","pRatingsReviews","singleProductDetail","id","fData","setFdata","success","setTimeout","_objectSpread","fetchData","responseData","Product","type","payload","error","console","log","children","className","length","map","item","index","src","alt","user","name","createdAt","format","review","Array","Number","rating","fill","viewBox","xmlns","d","_id","onClick","e","stroke","strokeLinecap","strokeLinejoin","strokeWidth"],"sources":["C:/Users/TUF GAMING/OneDrive/Desktop/BE project/working on shushruta/shushruta/client/src/components/shop/productDetails/AllReviews.js"],"sourcesContent":["import React, { Fragment, useContext, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Alert } from \"./Action\";\r\n\r\nimport moment from \"moment\";\r\nimport { LayoutContext } from \"../layout\";\r\nimport { deleteReview } from \"./Action\";\r\nimport { isAuthenticate } from \"../auth/fetchApi\";\r\nimport { getSingleProduct } from \"./FetchApi\";\r\n\r\nconst AllReviews = (props) => {\r\n  const { data, dispatch } = useContext(LayoutContext);\r\n  const { pRatingsReviews } = data.singleProductDetail;\r\n  let { id } = useParams(); // Prodduct Id\r\n\r\n  const [fData, setFdata] = useState({\r\n    success: false,\r\n  });\r\n\r\n  if (fData.success) {\r\n    setTimeout(() => {\r\n      setFdata({ ...fData, success: false });\r\n    }, 2000);\r\n  }\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      let responseData = await getSingleProduct(id);\r\n      if (responseData.Product) {\r\n        dispatch({\r\n          type: \"singleProductDetail\",\r\n          payload: responseData.Product,\r\n        });\r\n      }\r\n      if (responseData.error) {\r\n        console.log(responseData.error);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  console.log(pRatingsReviews);\r\n  return (\r\n    <Fragment>\r\n      <div className=\"md:mx-16 lg:mx-20 xl:mx-24 flex flex-col\">\r\n        {fData.success ? Alert(\"red\", fData.success) : \"\"}\r\n      </div>\r\n      <div className=\"mt-6 mb-12 md:mx-16 lg:mx-20 xl:mx-24\">\r\n        {/* List start */}\r\n        {pRatingsReviews.length > 0 ? (\r\n          pRatingsReviews.map((item, index) => {\r\n            return (\r\n              <Fragment key={index}>\r\n                <div className=\"mb-6 md:mb-8 flex flex-col md:flex-row md:items-start\">\r\n                  <img\r\n                    className=\"mx-2 w-16 h-16 rounded-full\"\r\n                    src=\"https://secure.gravatar.com/avatar/676d90a1574e9d3ebf98dd36f7adad60?s=60&d=mm&r=g\"\r\n                    alt=\"pic\"\r\n                  />\r\n                  <div className=\"mx-2 flex justify-between w-full\">\r\n                    <div className=\"flex flex-col\">\r\n                      <div className=\"flex flex-col\">\r\n                        <span>{item.user ? item.user.name : \"\"}</span>\r\n                        <span className=\"text-sm text-yellow-700\">\r\n                          {moment(item.createdAt).format(\"lll\")}\r\n                        </span>\r\n                      </div>\r\n                      <div className=\"leading-tight mt-3\">{item.review}</div>\r\n                    </div>\r\n                    <div className=\"flex flex-col\">\r\n                      <div className=\"flex\">\r\n                        {/* Yellow Star */}\r\n                        {[...Array(Number(item.rating))].map((index) => {\r\n                          return (\r\n                            <span key={index}>\r\n                              <svg\r\n                                className=\"w-4 h-4 fill-current text-yellow-700\"\r\n                                fill=\"currentColor\"\r\n                                viewBox=\"0 0 20 20\"\r\n                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                              >\r\n                                <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\r\n                              </svg>\r\n                            </span>\r\n                          );\r\n                        })}\r\n                        {/* White Star */}\r\n                        {[...Array(5 - Number(item.rating))].map((index) => {\r\n                          return (\r\n                            <span key={index}>\r\n                              <svg\r\n                                className=\"w-4 h-4 fill-current text-gray-300\"\r\n                                fill=\"currentColor\"\r\n                                viewBox=\"0 0 20 20\"\r\n                                xmlns=\"http://www.w3.org/2000/svg\"\r\n                              >\r\n                                <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\r\n                              </svg>\r\n                            </span>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                      {item.user &&\r\n                      isAuthenticate() &&\r\n                      item.user._id === isAuthenticate().user._id ? (\r\n                        <div className=\"flex justify-center my-2\">\r\n                          <span\r\n                            onClick={(e) =>\r\n                              deleteReview(\r\n                                item._id,\r\n                                data.singleProductDetail._id,\r\n                                fetchData,\r\n                                setFdata\r\n                              )\r\n                            }\r\n                            className=\"hover:bg-gray-300 p-2 rounded-full cursor-pointer\"\r\n                          >\r\n                            <svg\r\n                              className=\"w-6 h-6 text-yellow-700\"\r\n                              fill=\"none\"\r\n                              stroke=\"currentColor\"\r\n                              viewBox=\"0 0 24 24\"\r\n                              xmlns=\"http://www.w3.org/2000/svg\"\r\n                            >\r\n                              <path\r\n                                strokeLinecap=\"round\"\r\n                                strokeLinejoin=\"round\"\r\n                                strokeWidth={2}\r\n                                d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\r\n                              />\r\n                            </svg>\r\n                          </span>\r\n                        </div>\r\n                      ) : (\r\n                        <div></div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Fragment>\r\n            );\r\n          })\r\n        ) : (\r\n          <div>No Review found</div>\r\n        )}\r\n      </div>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default AllReviews;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}