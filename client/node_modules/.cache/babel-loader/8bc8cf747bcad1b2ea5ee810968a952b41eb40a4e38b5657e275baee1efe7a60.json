{"ast":null,"code":"import _objectSpread from\"C:/Users/TUF GAMING/OneDrive/Desktop/BE project/working on shushruta/shushruta/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from\"react\";import{postAddReview,postDeleteReview}from\"./FetchApi\";import{isAuthenticate}from\"../auth/fetchApi\";import{jsx as _jsx}from\"react/jsx-runtime\";export const Alert=(color,text)=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-\".concat(color,\"-200 px-4 py-2 my-2 rounded\"),children:text});export const reviewSubmitHanlder=(fData,setFdata,fetchData)=>{if(!fData.rating||!fData.review){setFdata(_objectSpread(_objectSpread({},fData),{},{error:\"Rating and review must be required\"}));}else if(!isAuthenticate()){setFdata(_objectSpread(_objectSpread({},fData),{},{error:\"You must need login to review\"}));}else{addReview(fData,setFdata,fetchData);}};export const deleteReview=async(reviewId,productId,fetchData,setFdata)=>{try{let responseData=await postDeleteReview({rId:reviewId,pId:productId});if(responseData.success){fetchData();setFdata({success:responseData.success});}else if(responseData.error){fetchData();}}catch(error){console.log(error);}};export const addReview=async(fData,setFdata,fetchData)=>{let formData={rating:fData.rating,review:fData.review,pId:fData.pId,uId:JSON.parse(localStorage.getItem(\"jwt\")).user._id};try{let responseData=await postAddReview(formData);if(responseData.success){setFdata(_objectSpread(_objectSpread({},fData),{},{success:responseData.success,review:\"\",rating:\"\"}));fetchData();}else if(responseData.error){setFdata(_objectSpread(_objectSpread({},fData),{},{error:responseData.error,review:\"\",rating:\"\"}));fetchData();}}catch(error){console.log(error);}};","map":{"version":3,"names":["React","postAddReview","postDeleteReview","isAuthenticate","jsx","_jsx","Alert","color","text","className","concat","children","reviewSubmitHanlder","fData","setFdata","fetchData","rating","review","_objectSpread","error","addReview","deleteReview","reviewId","productId","responseData","rId","pId","success","console","log","formData","uId","JSON","parse","localStorage","getItem","user","_id"],"sources":["C:/Users/TUF GAMING/OneDrive/Desktop/BE project/working on shushruta/shushruta/client/src/components/shop/productDetails/Action.js"],"sourcesContent":["import React from \"react\";\r\nimport { postAddReview, postDeleteReview } from \"./FetchApi\";\r\nimport { isAuthenticate } from \"../auth/fetchApi\";\r\n\r\nexport const Alert = (color, text) => (\r\n  <div className={`bg-${color}-200 px-4 py-2 my-2 rounded`}>{text}</div>\r\n);\r\n\r\nexport const reviewSubmitHanlder = (fData, setFdata, fetchData) => {\r\n  if (!fData.rating || !fData.review) {\r\n    setFdata({ ...fData, error: \"Rating and review must be required\" });\r\n  } else if (!isAuthenticate()) {\r\n    setFdata({ ...fData, error: \"You must need login to review\" });\r\n  } else {\r\n    addReview(fData, setFdata, fetchData);\r\n  }\r\n};\r\n\r\nexport const deleteReview = async (\r\n  reviewId,\r\n  productId,\r\n  fetchData,\r\n  setFdata\r\n) => {\r\n  try {\r\n    let responseData = await postDeleteReview({\r\n      rId: reviewId,\r\n      pId: productId,\r\n    });\r\n    if (responseData.success) {\r\n      fetchData();\r\n      setFdata({ success: responseData.success });\r\n    } else if (responseData.error) {\r\n      fetchData();\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const addReview = async (fData, setFdata, fetchData) => {\r\n  let formData = {\r\n    rating: fData.rating,\r\n    review: fData.review,\r\n    pId: fData.pId,\r\n    uId: JSON.parse(localStorage.getItem(\"jwt\")).user._id,\r\n  };\r\n  try {\r\n    let responseData = await postAddReview(formData);\r\n    if (responseData.success) {\r\n      setFdata({\r\n        ...fData,\r\n        success: responseData.success,\r\n        review: \"\",\r\n        rating: \"\",\r\n      });\r\n      fetchData();\r\n    } else if (responseData.error) {\r\n      setFdata({ ...fData, error: responseData.error, review: \"\", rating: \"\" });\r\n      fetchData();\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n"],"mappings":"0KAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,aAAa,CAAEC,gBAAgB,KAAQ,YAAY,CAC5D,OAASC,cAAc,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAElD,MAAO,MAAM,CAAAC,KAAK,CAAGA,CAACC,KAAK,CAAEC,IAAI,gBAC/BH,IAAA,QAAKI,SAAS,OAAAC,MAAA,CAAQH,KAAK,+BAA8B,CAAAI,QAAA,CAAEH,IAAI,CAAM,CACtE,CAED,MAAO,MAAM,CAAAI,mBAAmB,CAAGA,CAACC,KAAK,CAAEC,QAAQ,CAAEC,SAAS,GAAK,CACjE,GAAI,CAACF,KAAK,CAACG,MAAM,EAAI,CAACH,KAAK,CAACI,MAAM,CAAE,CAClCH,QAAQ,CAAAI,aAAA,CAAAA,aAAA,IAAML,KAAK,MAAEM,KAAK,CAAE,oCAAoC,EAAE,CAAC,CACrE,CAAC,IAAM,IAAI,CAAChB,cAAc,CAAC,CAAC,CAAE,CAC5BW,QAAQ,CAAAI,aAAA,CAAAA,aAAA,IAAML,KAAK,MAAEM,KAAK,CAAE,+BAA+B,EAAE,CAAC,CAChE,CAAC,IAAM,CACLC,SAAS,CAACP,KAAK,CAAEC,QAAQ,CAAEC,SAAS,CAAC,CACvC,CACF,CAAC,CAED,MAAO,MAAM,CAAAM,YAAY,CAAG,KAAAA,CAC1BC,QAAQ,CACRC,SAAS,CACTR,SAAS,CACTD,QAAQ,GACL,CACH,GAAI,CACF,GAAI,CAAAU,YAAY,CAAG,KAAM,CAAAtB,gBAAgB,CAAC,CACxCuB,GAAG,CAAEH,QAAQ,CACbI,GAAG,CAAEH,SACP,CAAC,CAAC,CACF,GAAIC,YAAY,CAACG,OAAO,CAAE,CACxBZ,SAAS,CAAC,CAAC,CACXD,QAAQ,CAAC,CAAEa,OAAO,CAAEH,YAAY,CAACG,OAAQ,CAAC,CAAC,CAC7C,CAAC,IAAM,IAAIH,YAAY,CAACL,KAAK,CAAE,CAC7BJ,SAAS,CAAC,CAAC,CACb,CACF,CAAE,MAAOI,KAAK,CAAE,CACdS,OAAO,CAACC,GAAG,CAACV,KAAK,CAAC,CACpB,CACF,CAAC,CAED,MAAO,MAAM,CAAAC,SAAS,CAAG,KAAAA,CAAOP,KAAK,CAAEC,QAAQ,CAAEC,SAAS,GAAK,CAC7D,GAAI,CAAAe,QAAQ,CAAG,CACbd,MAAM,CAAEH,KAAK,CAACG,MAAM,CACpBC,MAAM,CAAEJ,KAAK,CAACI,MAAM,CACpBS,GAAG,CAAEb,KAAK,CAACa,GAAG,CACdK,GAAG,CAAEC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC,CAAC,CAACC,IAAI,CAACC,GACpD,CAAC,CACD,GAAI,CACF,GAAI,CAAAb,YAAY,CAAG,KAAM,CAAAvB,aAAa,CAAC6B,QAAQ,CAAC,CAChD,GAAIN,YAAY,CAACG,OAAO,CAAE,CACxBb,QAAQ,CAAAI,aAAA,CAAAA,aAAA,IACHL,KAAK,MACRc,OAAO,CAAEH,YAAY,CAACG,OAAO,CAC7BV,MAAM,CAAE,EAAE,CACVD,MAAM,CAAE,EAAE,EACX,CAAC,CACFD,SAAS,CAAC,CAAC,CACb,CAAC,IAAM,IAAIS,YAAY,CAACL,KAAK,CAAE,CAC7BL,QAAQ,CAAAI,aAAA,CAAAA,aAAA,IAAML,KAAK,MAAEM,KAAK,CAAEK,YAAY,CAACL,KAAK,CAAEF,MAAM,CAAE,EAAE,CAAED,MAAM,CAAE,EAAE,EAAE,CAAC,CACzED,SAAS,CAAC,CAAC,CACb,CACF,CAAE,MAAOI,KAAK,CAAE,CACdS,OAAO,CAACC,GAAG,CAACV,KAAK,CAAC,CACpB,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}