{"ast":null,"code":"import _objectSpread from\"C:/Users/TUF GAMING/OneDrive/Desktop/BE project/working on shushruta/shushruta/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{Fragment,useState,useContext}from\"react\";import{useParams}from\"react-router-dom\";import{Alert,reviewSubmitHanlder}from\"./Action\";import{LayoutContext}from\"../layout\";import{isAuthenticate}from\"../auth/fetchApi\";import{getSingleProduct}from\"./FetchApi\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const ReviewForm=props=>{const{data,dispatch}=useContext(LayoutContext);let{id}=useParams();// Product Id\nconst[fData,setFdata]=useState({rating:\"\",review:\"\",error:false,success:false,pId:id});if(fData.error||fData.success){setTimeout(()=>{setFdata(_objectSpread(_objectSpread({},fData),{},{error:false,success:false}));},3000);}const fetchData=async()=>{try{let responseData=await getSingleProduct(id);if(responseData.Product){dispatch({type:\"singleProductDetail\",payload:responseData.Product});console.log(data);}if(responseData.error){console.log(responseData.error);}}catch(error){console.log(error);}};const ratingUserList=data.singleProductDetail.pRatingsReviews.map(item=>{return item.user?item.user._id:\"\";});return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:mx-16 lg:mx-20 xl:mx-24 flex flex-col\",children:[fData.error?Alert(\"red\",fData.error):\"\",fData.success?Alert(\"green\",fData.success):\"\"]}),ratingUserList.includes(isAuthenticate().user._id)?/*#__PURE__*/_jsx(\"div\",{className:\"mb-12 md:mx-16 lg:mx-20 xl:mx-24\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"mb-12 md:mx-16 lg:mx-20 xl:mx-24 flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl font-medium\",children:\"Add a review\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 text-sm\",children:\"Your email address will not be published. Required fields are marked *\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"fieldset\",{onChange:e=>setFdata(_objectSpread(_objectSpread({},fData),{},{rating:e.target.value})),className:\"rating\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",className:\"rating\",id:\"star5\",name:\"rating\",defaultValue:5}),/*#__PURE__*/_jsx(\"label\",{className:\"full\",htmlFor:\"star5\",title:\"Awesome - 5 stars\"}),/*#__PURE__*/_jsx(\"input\",{type:\"radio\",className:\"rating\",id:\"star4\",name:\"rating\",defaultValue:4}),/*#__PURE__*/_jsx(\"label\",{className:\"full\",htmlFor:\"star4\",title:\"Pretty good - 4 stars\"}),/*#__PURE__*/_jsx(\"input\",{type:\"radio\",className:\"rating\",id:\"star3\",name:\"rating\",defaultValue:3}),/*#__PURE__*/_jsx(\"label\",{className:\"full\",htmlFor:\"star3\",title:\"Meh - 3 stars\"}),/*#__PURE__*/_jsx(\"input\",{type:\"radio\",className:\"rating\",id:\"star2\",name:\"rating\",defaultValue:2}),/*#__PURE__*/_jsx(\"label\",{className:\"full\",htmlFor:\"star2\",title:\"Kinda bad - 2 stars\"}),/*#__PURE__*/_jsx(\"input\",{type:\"radio\",className:\"rating\",id:\"star1\",name:\"rating\",defaultValue:1}),/*#__PURE__*/_jsx(\"label\",{className:\"full\",htmlFor:\"star1\",title:\"Sucks big time - 1 star\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"textArea\",children:[\"Review \",/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:e=>setFdata(_objectSpread(_objectSpread({},fData),{},{review:e.target.value})),value:fData.review,className:\"border px-4 py-2 focus:outline-none\",name:\"textArea\",id:\"textArea\",cols:30,rows:3,placeholder:\"Your review...\"})]}),/*#__PURE__*/_jsx(\"div\",{onClick:e=>reviewSubmitHanlder(fData,setFdata,fetchData),style:{background:\"#303031\"},className:\"inline-block rounded px-4 py-2 text-white text-center cursor-pointer\",children:\"Submit\"})]})]})]});};export default ReviewForm;","map":{"version":3,"names":["React","Fragment","useState","useContext","useParams","Alert","reviewSubmitHanlder","LayoutContext","isAuthenticate","getSingleProduct","jsxs","_jsxs","jsx","_jsx","ReviewForm","props","data","dispatch","id","fData","setFdata","rating","review","error","success","pId","setTimeout","_objectSpread","fetchData","responseData","Product","type","payload","console","log","ratingUserList","singleProductDetail","pRatingsReviews","map","item","user","_id","children","className","includes","onChange","e","target","value","name","defaultValue","htmlFor","title","cols","rows","placeholder","onClick","style","background"],"sources":["C:/Users/TUF GAMING/OneDrive/Desktop/BE project/working on shushruta/shushruta/client/src/components/shop/productDetails/ReviewForm.js"],"sourcesContent":["import React, { Fragment, useState, useContext } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { Alert, reviewSubmitHanlder } from \"./Action\";\r\nimport { LayoutContext } from \"../layout\";\r\nimport { isAuthenticate } from \"../auth/fetchApi\";\r\nimport { getSingleProduct } from \"./FetchApi\";\r\n\r\nconst ReviewForm = (props) => {\r\n  const { data, dispatch } = useContext(LayoutContext);\r\n  let { id } = useParams(); // Product Id\r\n\r\n  const [fData, setFdata] = useState({\r\n    rating: \"\",\r\n    review: \"\",\r\n    error: false,\r\n    success: false,\r\n    pId: id,\r\n  });\r\n\r\n  if (fData.error || fData.success) {\r\n    setTimeout(() => {\r\n      setFdata({ ...fData, error: false, success: false });\r\n    }, 3000);\r\n  }\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      let responseData = await getSingleProduct(id);\r\n      if (responseData.Product) {\r\n        dispatch({\r\n          type: \"singleProductDetail\",\r\n          payload: responseData.Product,\r\n        });\r\n        console.log(data);\r\n      }\r\n      if (responseData.error) {\r\n        console.log(responseData.error);\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const ratingUserList = data.singleProductDetail.pRatingsReviews.map(\r\n    (item) => {\r\n      return item.user ? item.user._id : \"\";\r\n    }\r\n  );\r\n\r\n  return (\r\n    <Fragment>\r\n      <div className=\"md:mx-16 lg:mx-20 xl:mx-24 flex flex-col\">\r\n        {fData.error ? Alert(\"red\", fData.error) : \"\"}\r\n        {fData.success ? Alert(\"green\", fData.success) : \"\"}\r\n      </div>\r\n      {ratingUserList.includes(isAuthenticate().user._id) ? (\r\n        <div className=\"mb-12 md:mx-16 lg:mx-20 xl:mx-24\"></div>\r\n      ) : (\r\n        <div className=\"mb-12 md:mx-16 lg:mx-20 xl:mx-24 flex flex-col\">\r\n          <div className=\"flex flex-col space-y-2\">\r\n            <span className=\"text-2xl font-medium\">Add a review</span>\r\n            <span className=\"text-gray-600 text-sm\">\r\n              Your email address will not be published. Required fields are\r\n              marked *\r\n            </span>\r\n          </div>\r\n          {/* Input Rating */}\r\n          <div className=\"mb-4\">\r\n            <fieldset\r\n              onChange={(e) => setFdata({ ...fData, rating: e.target.value })}\r\n              className=\"rating\"\r\n            >\r\n              <input\r\n                type=\"radio\"\r\n                className=\"rating\"\r\n                id=\"star5\"\r\n                name=\"rating\"\r\n                defaultValue={5}\r\n              />\r\n              <label\r\n                className=\"full\"\r\n                htmlFor=\"star5\"\r\n                title=\"Awesome - 5 stars\"\r\n              />\r\n              <input\r\n                type=\"radio\"\r\n                className=\"rating\"\r\n                id=\"star4\"\r\n                name=\"rating\"\r\n                defaultValue={4}\r\n              />\r\n              <label\r\n                className=\"full\"\r\n                htmlFor=\"star4\"\r\n                title=\"Pretty good - 4 stars\"\r\n              />\r\n              <input\r\n                type=\"radio\"\r\n                className=\"rating\"\r\n                id=\"star3\"\r\n                name=\"rating\"\r\n                defaultValue={3}\r\n              />\r\n              <label className=\"full\" htmlFor=\"star3\" title=\"Meh - 3 stars\" />\r\n              <input\r\n                type=\"radio\"\r\n                className=\"rating\"\r\n                id=\"star2\"\r\n                name=\"rating\"\r\n                defaultValue={2}\r\n              />\r\n              <label\r\n                className=\"full\"\r\n                htmlFor=\"star2\"\r\n                title=\"Kinda bad - 2 stars\"\r\n              />\r\n              <input\r\n                type=\"radio\"\r\n                className=\"rating\"\r\n                id=\"star1\"\r\n                name=\"rating\"\r\n                defaultValue={1}\r\n              />\r\n              <label\r\n                className=\"full\"\r\n                htmlFor=\"star1\"\r\n                title=\"Sucks big time - 1 star\"\r\n              />\r\n            </fieldset>\r\n          </div>\r\n          {/* Review Form */}\r\n          <div className=\"space-y-4\">\r\n            <div className=\"flex flex-col\">\r\n              <label htmlFor=\"textArea\">\r\n                Review <span className=\"text-sm text-gray-600\">*</span>\r\n              </label>\r\n              <textarea\r\n                onChange={(e) => setFdata({ ...fData, review: e.target.value })}\r\n                value={fData.review}\r\n                className=\"border px-4 py-2 focus:outline-none\"\r\n                name=\"textArea\"\r\n                id=\"textArea\"\r\n                cols={30}\r\n                rows={3}\r\n                placeholder=\"Your review...\"\r\n              />\r\n            </div>\r\n            <div\r\n              onClick={(e) => reviewSubmitHanlder(fData, setFdata, fetchData)}\r\n              style={{ background: \"#303031\" }}\r\n              className=\"inline-block rounded px-4 py-2 text-white text-center cursor-pointer\"\r\n            >\r\n              Submit\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default ReviewForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}