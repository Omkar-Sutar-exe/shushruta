{"ast":null,"code":"import _objectSpread from\"C:/Users/TUF GAMING/OneDrive/Desktop/BE project/working on shushruta/shushruta/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{getUserById,updatePersonalInformationFetch,getOrderByUser,updatePassword}from\"./FetchApi\";export const logout=()=>{localStorage.removeItem(\"jwt\");localStorage.removeItem(\"cart\");localStorage.removeItem(\"wishList\");window.location.href=\"/\";};export const fetchData=async dispatch=>{dispatch({type:\"loading\",payload:true});let userId=JSON.parse(localStorage.getItem(\"jwt\"))?JSON.parse(localStorage.getItem(\"jwt\")).user._id:\"\";try{let responseData=await getUserById(userId);setTimeout(()=>{if(responseData&&responseData.User){dispatch({type:\"userDetails\",payload:responseData.User});dispatch({type:\"loading\",payload:false});}},500);}catch(error){console.log(error);}};export const fetchOrderByUser=async dispatch=>{dispatch({type:\"loading\",payload:true});let userId=JSON.parse(localStorage.getItem(\"jwt\"))?JSON.parse(localStorage.getItem(\"jwt\")).user._id:\"\";try{let responseData=await getOrderByUser(userId);setTimeout(()=>{if(responseData&&responseData.Order){console.log(responseData);dispatch({type:\"OrderByUser\",payload:responseData.Order});dispatch({type:\"loading\",payload:false});}},500);}catch(error){console.log(error);}};export const updatePersonalInformationAction=async(dispatch,fData)=>{const formData={uId:fData.id,name:fData.name,phoneNumber:fData.phone};dispatch({type:\"loading\",payload:true});try{let responseData=await updatePersonalInformationFetch(formData);setTimeout(()=>{if(responseData&&responseData.success){dispatch({type:\"loading\",payload:false});fetchData(dispatch);}},500);}catch(error){console.log(error);}};export const handleChangePassword=async(fData,setFdata,dispatch)=>{if(!fData.newPassword||!fData.oldPassword||!fData.confirmPassword){setFdata(_objectSpread(_objectSpread({},fData),{},{error:\"Please provide your all password and a new password\"}));}else if(fData.newPassword!==fData.confirmPassword){setFdata(_objectSpread(_objectSpread({},fData),{},{error:\"Password does't match\"}));}else{const formData={uId:JSON.parse(localStorage.getItem(\"jwt\")).user._id,oldPassword:fData.oldPassword,newPassword:fData.newPassword};dispatch({type:\"loading\",payload:true});try{let responseData=await updatePassword(formData);if(responseData&&responseData.success){setFdata(_objectSpread(_objectSpread({},fData),{},{success:responseData.success,error:\"\",oldPassword:\"\",newPassword:\"\",confirmPassword:\"\"}));dispatch({type:\"loading\",payload:false});}else if(responseData.error){dispatch({type:\"loading\",payload:false});setFdata(_objectSpread(_objectSpread({},fData),{},{error:responseData.error,success:\"\",oldPassword:\"\",newPassword:\"\",confirmPassword:\"\"}));}}catch(error){console.log(error);}}};","map":{"version":3,"names":["getUserById","updatePersonalInformationFetch","getOrderByUser","updatePassword","logout","localStorage","removeItem","window","location","href","fetchData","dispatch","type","payload","userId","JSON","parse","getItem","user","_id","responseData","setTimeout","User","error","console","log","fetchOrderByUser","Order","updatePersonalInformationAction","fData","formData","uId","id","name","phoneNumber","phone","success","handleChangePassword","setFdata","newPassword","oldPassword","confirmPassword","_objectSpread"],"sources":["C:/Users/TUF GAMING/OneDrive/Desktop/BE project/working on shushruta/shushruta/client/src/components/shop/dashboardUser/Action.js"],"sourcesContent":["import {\r\n  getUserById,\r\n  updatePersonalInformationFetch,\r\n  getOrderByUser,\r\n  updatePassword,\r\n} from \"./FetchApi\";\r\n\r\nexport const logout = () => {\r\n  localStorage.removeItem(\"jwt\");\r\n  localStorage.removeItem(\"cart\");\r\n  localStorage.removeItem(\"wishList\");\r\n  window.location.href = \"/\";\r\n};\r\n\r\nexport const fetchData = async (dispatch) => {\r\n  dispatch({ type: \"loading\", payload: true });\r\n  let userId = JSON.parse(localStorage.getItem(\"jwt\"))\r\n    ? JSON.parse(localStorage.getItem(\"jwt\")).user._id\r\n    : \"\";\r\n  try {\r\n    let responseData = await getUserById(userId);\r\n    setTimeout(() => {\r\n      if (responseData && responseData.User) {\r\n        dispatch({ type: \"userDetails\", payload: responseData.User });\r\n        dispatch({ type: \"loading\", payload: false });\r\n      }\r\n    }, 500);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const fetchOrderByUser = async (dispatch) => {\r\n  dispatch({ type: \"loading\", payload: true });\r\n  let userId = JSON.parse(localStorage.getItem(\"jwt\"))\r\n    ? JSON.parse(localStorage.getItem(\"jwt\")).user._id\r\n    : \"\";\r\n  try {\r\n    let responseData = await getOrderByUser(userId);\r\n    setTimeout(() => {\r\n      if (responseData && responseData.Order) {\r\n        console.log(responseData);\r\n        dispatch({ type: \"OrderByUser\", payload: responseData.Order });\r\n        dispatch({ type: \"loading\", payload: false });\r\n      }\r\n    }, 500);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const updatePersonalInformationAction = async (dispatch, fData) => {\r\n  const formData = {\r\n    uId: fData.id,\r\n    name: fData.name,\r\n    phoneNumber: fData.phone,\r\n  };\r\n  dispatch({ type: \"loading\", payload: true });\r\n  try {\r\n    let responseData = await updatePersonalInformationFetch(formData);\r\n    setTimeout(() => {\r\n      if (responseData && responseData.success) {\r\n        dispatch({ type: \"loading\", payload: false });\r\n        fetchData(dispatch);\r\n      }\r\n    }, 500);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const handleChangePassword = async (fData, setFdata, dispatch) => {\r\n  if (!fData.newPassword || !fData.oldPassword || !fData.confirmPassword) {\r\n    setFdata({\r\n      ...fData,\r\n      error: \"Please provide your all password and a new password\",\r\n    });\r\n  } else if (fData.newPassword !== fData.confirmPassword) {\r\n    setFdata({ ...fData, error: \"Password does't match\" });\r\n  } else {\r\n    const formData = {\r\n      uId: JSON.parse(localStorage.getItem(\"jwt\")).user._id,\r\n      oldPassword: fData.oldPassword,\r\n      newPassword: fData.newPassword,\r\n    };\r\n    dispatch({ type: \"loading\", payload: true });\r\n    try {\r\n      let responseData = await updatePassword(formData);\r\n      if (responseData && responseData.success) {\r\n        setFdata({\r\n          ...fData,\r\n          success: responseData.success,\r\n          error: \"\",\r\n          oldPassword: \"\",\r\n          newPassword: \"\",\r\n          confirmPassword: \"\",\r\n        });\r\n        dispatch({ type: \"loading\", payload: false });\r\n      } else if (responseData.error) {\r\n        dispatch({ type: \"loading\", payload: false });\r\n        setFdata({\r\n          ...fData,\r\n          error: responseData.error,\r\n          success: \"\",\r\n          oldPassword: \"\",\r\n          newPassword: \"\",\r\n          confirmPassword: \"\",\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}